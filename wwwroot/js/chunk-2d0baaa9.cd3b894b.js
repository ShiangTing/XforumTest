(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0baaa9"],{"37d3":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Navbar"),a("b-row",{},[a("b-col"),a("b-col",{attrs:{cols:"8"}},[a("b-form",{staticClass:"mt-3",attrs:{inline:""}},[a("label",{staticClass:"mr-sm-2",attrs:{for:"inline-form-custom-select-pref"}},[t._v("選擇看板:")]),a("select",{on:{change:function(e){return t.getOptionIdx(e,e.target.selectedIndex)}}},[a("option",{attrs:{disabled:"",selected:""}},[t._v("請選擇看板")]),t._l(t.selectThread.threadName,(function(e,i){return a("option",{key:i,attrs:{id:t.selectThread.threadId[i]}},[t._v(" "+t._s(e)+" ")])}))],2)]),a("b-form",{staticClass:"mt-3",attrs:{inline:""}},[a("label",{staticClass:"mr-3"},[t._v("標題:")]),a("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",class:{"is-invalid":t.inputDataCheck.TitleError},attrs:{id:"inline-form-input-name",placeholder:"請輸入文字",maxlength:"15"},model:{value:t.titleContent,callback:function(e){t.titleContent=e},expression:"titleContent"}}),a("div",{staticClass:"text-danger small mt-1"},[t._v(" "+t._s(t.inputDataCheck.TitleErrorMsg)+" ")])],1),a("p",{staticClass:"my-4"},[t._v("內文:")]),a("vue-editor",{attrs:{id:"editor",useCustomImageHandler:"",customModules:t.customModulesForEditor,editorOptions:t.editorSettings},on:{"image-added":t.handleImageAdded},model:{value:t.editorContent,callback:function(e){t.editorContent=e},expression:"editorContent"}}),a("b-button",{staticClass:"btn btn-primary mt-3",attrs:{disabled:0==t.AddVerify},on:{click:t.saveContent}},[t._v(" 發文 ")])],1),a("b-col")],1)],1)},o=[],n=(a("4160"),a("9911"),a("159b"),a("96cf"),a("1da1")),r=a("7106"),s=a("5873"),l=a("2a19"),c=a("9e07"),d=a.n(c),u=a("bc3a"),h=a.n(u),m={components:{Navbar:r["default"],VueEditor:s["a"]},name:"App",data:function(){return{userId:"",customModulesForEditor:[{alias:"imageDrop",module:l["a"]},{alias:"imageResize",module:d.a}],editorSettings:{modules:{imageDrop:!0,imageResize:{}}},editorContent:"",customToolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["image","code-block"]],postData:{ForumId:"",Title:"",Description:"",UserId:""},selectThread:{threadName:[],threadId:[],select:""},selectPlaceHolder:"請選擇看板",titleContent:"",isLogin:"",inputDataCheck:{TitleError:!1,TitleErrorMsg:""},AddVerify:!0}},methods:{getOptionIdx:function(t,e){this.selectThread.select=t.target.querySelectorAll("option")[e].id},handleImageAdded:function(t,e,a){var i="3d78cf6e67ed6af",o=new FormData;o.append("image",t),console.log("底下是formdata"),console.log(o),h()({url:"https://api.imgur.com/3/image",method:"POST",headers:{Authorization:"Client-ID "+i},data:o}).then((function(t){var i=t.data.data.link;e.insertEmbed(a,"image",i)})).catch((function(t){console.log(t)}))},getUserId:function(){var t=this,e=t.$store.state.tokenModule,a=e.isAuthorize,i=e.token,o="/api/Users/GetUserId";a&&(t.isLogin=!0,t.$axios({url:o,method:"GET",headers:{Authorization:"Bearer ".concat(i)}}).then((function(e){t.userId=e.data})).catch((function(t){return console.log(t.response)})))},getThreadName:function(){var t=this,e="/api/Forum/GetAll";this.$axios.get(e).then((function(e){e.data.forEach((function(e){t.selectThread.threadName.push(e.forumName),t.selectThread.threadId.push(e.forumId)})),t.selectThread.select=e.data[0].forumName})).catch((function(t){console.log(t)}))},saveContent:function(){var t=this;this.postData.ForumId=this.selectThread.select,this.postData.Title=this.titleContent,this.postData.Description=this.editorContent,this.postData.UserId=this.userId,this.$axios.post("/api/Post/Create",this.postData).then((function(e){console.log(e.data),console.log("成功Po文"),t.$router.push("/")})).catch((function(t){console.log(t)}))},checkAddVerify:function(){for(var t in this.inputDataCheck)if(1==this.inputDataCheck[t])return console.log(this.inputDataCheck[t]),void(this.AddVerify=!1);this.AddVerify=!0}},watch:{titleContent:{immediate:!0,handler:function(){""==this.titleContent?(this.inputDataCheck.TitleError=!0,this.inputDataCheck.TitleErrorMsg="請輸入文字哦!"):15==this.titleContent.length?(this.inputDataCheck.TitleError=!0,this.inputDataCheck.TitleErrorMsg="最多只能15個字哦!"):(this.inputDataCheck.TitleError=!1,this.inputDataCheck.TitleErrorMsg=""),this.checkAddVerify()}}},created:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getUserId();case 2:return e.next=4,t.getThreadName();case 4:case"end":return e.stop()}}),e)})))()}},p=m,f=a("2877"),g=Object(f["a"])(p,i,o,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d0baaa9.cd3b894b.js.map