{"version":3,"sources":["webpack:///./src/views/Post.vue?a2cb","webpack:///src/views/Post.vue","webpack:///./src/views/Post.vue?fbdc","webpack:///./src/views/Post.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","on","$event","getOptionIdx","target","selectedIndex","_l","selectThread","item","idx","key","threadId","_s","class","inputDataCheck","TitleError","model","value","callback","$$v","titleContent","expression","TitleErrorMsg","customModulesForEditor","editorSettings","handleImageAdded","editorContent","AddVerify","saveContent","staticRenderFns","components","name","data","userId","modules","imageDrop","imageResize","customToolbar","postData","ForumId","Title","Description","UserId","threadName","select","selectPlaceHolder","isLogin","methods","event","querySelectorAll","formData","FormData","append","file","console","log","url","method","headers","Authorization","CLIENT_ID","getUserId","isAuth","vm","$axios","getThreadName","checkAddVerify","index","watch","immediate","handler","component"],"mappings":"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","file":"js/chunk-2d0baaa9.cd3b894b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Navbar'),_c('b-row',{},[_c('b-col'),_c('b-col',{attrs:{\"cols\":\"8\"}},[_c('b-form',{staticClass:\"mt-3\",attrs:{\"inline\":\"\"}},[_c('label',{staticClass:\"mr-sm-2\",attrs:{\"for\":\"inline-form-custom-select-pref\"}},[_vm._v(\"選擇看板:\")]),_c('select',{on:{\"change\":function($event){return _vm.getOptionIdx($event, $event.target.selectedIndex)}}},[_c('option',{attrs:{\"disabled\":\"\",\"selected\":\"\"}},[_vm._v(\"請選擇看板\")]),_vm._l((_vm.selectThread.threadName),function(item,idx){return _c('option',{key:idx,attrs:{\"id\":_vm.selectThread.threadId[idx]}},[_vm._v(\" \"+_vm._s(item)+\" \")])})],2)]),_c('b-form',{staticClass:\"mt-3\",attrs:{\"inline\":\"\"}},[_c('label',{staticClass:\"mr-3\"},[_vm._v(\"標題:\")]),_c('b-input',{staticClass:\"mb-2 mr-sm-2 mb-sm-0\",class:{ 'is-invalid': _vm.inputDataCheck.TitleError },attrs:{\"id\":\"inline-form-input-name\",\"placeholder\":\"請輸入文字\",\"maxlength\":\"15\"},model:{value:(_vm.titleContent),callback:function ($$v) {_vm.titleContent=$$v},expression:\"titleContent\"}}),_c('div',{staticClass:\"text-danger small mt-1\"},[_vm._v(\" \"+_vm._s(_vm.inputDataCheck.TitleErrorMsg)+\" \")])],1),_c('p',{staticClass:\"my-4\"},[_vm._v(\"內文:\")]),_c('vue-editor',{attrs:{\"id\":\"editor\",\"useCustomImageHandler\":\"\",\"customModules\":_vm.customModulesForEditor,\"editorOptions\":_vm.editorSettings},on:{\"image-added\":_vm.handleImageAdded},model:{value:(_vm.editorContent),callback:function ($$v) {_vm.editorContent=$$v},expression:\"editorContent\"}}),_c('b-button',{staticClass:\"btn btn-primary mt-3\",attrs:{\"disabled\":_vm.AddVerify == false},on:{\"click\":_vm.saveContent}},[_vm._v(\" 發文 \")])],1),_c('b-col')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- Two-way Data-Binding -->\r\n  <div>\r\n    <Navbar />\r\n    <b-row class=\"\">\r\n      <b-col> </b-col>\r\n      <b-col cols=\"8\">\r\n        <!-- <h1>selected: {{ select }}</h1> -->\r\n        <!-- <span>會員名稱:{{ userId }}</span> -->\r\n        <b-form inline class=\"mt-3\">\r\n          <label class=\"mr-sm-2\" for=\"inline-form-custom-select-pref\"\r\n            >選擇看板:</label\r\n          >\r\n\r\n          <select @change=\"getOptionIdx($event, $event.target.selectedIndex)\">\r\n            <option disabled selected>請選擇看板</option>\r\n            <option\r\n              v-for=\"(item, idx) in selectThread.threadName\"\r\n              :key=\"idx\"\r\n              :id=\"selectThread.threadId[idx]\"\r\n            >\r\n              {{ item }}\r\n            </option>\r\n          </select>\r\n        </b-form>\r\n        <b-form inline class=\"mt-3\">\r\n          <label class=\"mr-3\">標題:</label>\r\n          <b-input\r\n            v-model=\"titleContent\"\r\n            id=\"inline-form-input-name\"\r\n            class=\"mb-2 mr-sm-2 mb-sm-0\"\r\n            placeholder=\"請輸入文字\"\r\n            :class=\"{ 'is-invalid': inputDataCheck.TitleError }\"\r\n            maxlength=\"15\"\r\n          ></b-input>\r\n          <div class=\"text-danger small mt-1\">\r\n            {{ inputDataCheck.TitleErrorMsg }}\r\n          </div>\r\n        </b-form>\r\n\r\n        <p class=\"my-4\">內文:</p>\r\n        <vue-editor\r\n          id=\"editor\"\r\n          useCustomImageHandler\r\n          @image-added=\"handleImageAdded\"\r\n          :customModules=\"customModulesForEditor\"\r\n          :editorOptions=\"editorSettings\"\r\n          v-model=\"editorContent\"\r\n        ></vue-editor>\r\n        <b-button\r\n          :disabled=\"AddVerify == false\"\r\n          class=\"btn btn-primary mt-3\"\r\n          @click=\"saveContent\"\r\n        >\r\n          發文\r\n        </b-button>\r\n      </b-col>\r\n      <b-col></b-col>\r\n    </b-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Navbar from \"../components/common/Navbar\";\r\n// Advanced Use - Hook into Quill's API for Custom Functionality\r\nimport { VueEditor } from \"vue2-editor\";\r\nimport { ImageDrop } from \"quill-image-drop-module\";\r\nimport ImageResize from \"quill-image-resize\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  components: { Navbar, VueEditor },\r\n  name: \"App\",\r\n\r\n  data() {\r\n    return {\r\n      userId: \"\",\r\n      customModulesForEditor: [\r\n        { alias: \"imageDrop\", module: ImageDrop },\r\n        { alias: \"imageResize\", module: ImageResize },\r\n      ],\r\n      editorSettings: {\r\n        modules: {\r\n          imageDrop: true,\r\n          imageResize: {},\r\n        },\r\n      },\r\n      editorContent: \"\",\r\n      customToolbar: [\r\n        [\"bold\", \"italic\", \"underline\"],\r\n        [{ list: \"ordered\" }, { list: \"bullet\" }],\r\n        [\"image\", \"code-block\"],\r\n      ],\r\n      postData: {\r\n        ForumId: \"\",\r\n        Title: \"\",\r\n        Description: \"\",\r\n        UserId: \"\",\r\n      },\r\n      selectThread: {\r\n        threadName: [],\r\n        threadId: [],\r\n        select: \"\",\r\n      },\r\n      selectPlaceHolder: \"請選擇看板\",\r\n      titleContent: \"\",\r\n      isLogin: \"\",\r\n      inputDataCheck: {\r\n        TitleError: false,\r\n        TitleErrorMsg: \"\",\r\n      },\r\n      AddVerify: true,\r\n    };\r\n  },\r\n  methods: {\r\n    getOptionIdx: function (event, selectedIndex) {\r\n      this.selectThread.select = event.target.querySelectorAll(\"option\")[\r\n        selectedIndex\r\n      ].id;\r\n    },\r\n    //connect imgur api to upload img , from base64 to img\r\n    handleImageAdded(file, Editor, cursorLocation) {\r\n      const CLIENT_ID = \"3d78cf6e67ed6af\";\r\n      var formData = new FormData();\r\n      formData.append(\"image\", file);\r\n      console.log(\"底下是formdata\");\r\n      console.log(formData);\r\n      axios({\r\n        url: \"https://api.imgur.com/3/image\",\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: \"Client-ID \" + CLIENT_ID,\r\n        },\r\n        data: formData,\r\n      })\r\n        .then((result) => {\r\n          let url = result.data.data.link;\r\n          Editor.insertEmbed(cursorLocation, \"image\", url);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getUserId: function () {\r\n      let vm = this;\r\n      let auth = vm.$store.state.tokenModule;\r\n      let isAuth = auth.isAuthorize;\r\n      let token = auth.token;\r\n      const url = process.env.VUE_APP_API + \"/api/Users/GetUserId\";\r\n      if (isAuth) {\r\n        vm.isLogin = true;\r\n        vm.$axios({\r\n          url: url,\r\n          method: \"GET\",\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n          .then((res) => {\r\n            vm.userId = res.data;\r\n          })\r\n          .catch((err) => console.log(err.response));\r\n      }\r\n    },\r\n    getThreadName: function () {\r\n      const url = process.env.VUE_APP_API + \"/api/Forum/GetAll\";\r\n      this.$axios\r\n        .get(url)\r\n        .then((response) => {\r\n          response.data.forEach((item) => {\r\n            this.selectThread.threadName.push(item.forumName);\r\n            this.selectThread.threadId.push(item.forumId);\r\n          });\r\n          this.selectThread.select = response.data[0].forumName;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    saveContent: function () {\r\n      let vm = this;\r\n      this.postData.ForumId = this.selectThread.select;\r\n      this.postData.Title = this.titleContent;\r\n      this.postData.Description = this.editorContent;\r\n      this.postData.UserId = this.userId;\r\n      this.$axios\r\n        .post(process.env.VUE_APP_API + \"/api/Post/Create\", this.postData)\r\n        .then((response) => {\r\n          console.log(response.data);\r\n          console.log(\"成功Po文\");\r\n          vm.$router.push(\"/\");\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    checkAddVerify() {\r\n      for (let index in this.inputDataCheck) {\r\n        if (this.inputDataCheck[index] == true) {\r\n          console.log(this.inputDataCheck[index]);\r\n          this.AddVerify = false;\r\n          return;\r\n        }\r\n      }\r\n      this.AddVerify = true;\r\n    },\r\n  },\r\n  watch: {\r\n    titleContent: {\r\n      immediate: true,\r\n      handler: function () {\r\n        if (this.titleContent == \"\") {\r\n          this.inputDataCheck.TitleError = true;\r\n          this.inputDataCheck.TitleErrorMsg = \"請輸入文字哦!\";\r\n        } else if (this.titleContent.length == 15) {\r\n          this.inputDataCheck.TitleError = true;\r\n          this.inputDataCheck.TitleErrorMsg = \"最多只能15個字哦!\";\r\n        } else {\r\n          this.inputDataCheck.TitleError = false;\r\n          this.inputDataCheck.TitleErrorMsg = \"\";\r\n        }\r\n        this.checkAddVerify();\r\n      },\r\n    },\r\n  },\r\n  async created() {\r\n    await this.getUserId();\r\n    await this.getThreadName();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Post.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Post.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Post.vue?vue&type=template&id=badfcd1e&\"\nimport script from \"./Post.vue?vue&type=script&lang=js&\"\nexport * from \"./Post.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}